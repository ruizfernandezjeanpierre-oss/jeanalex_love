<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Reino Pixel de Naomi ðŸ‘‘âœ¨</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{
margin:0;
overflow:hidden;
background:black;
image-rendering: pixelated;
font-family: monospace;
}

/* ðŸŒŒ Fondo estrellas */
.star{
position:absolute;
width:2px;
height:2px;
background:white;
animation:fall linear infinite;
}
@keyframes fall{
from{transform:translateY(-10px);}
to{transform:translateY(100vh);}
}

/* ðŸ’— Corazones */
.heart{
position:absolute;
color:pink;
font-size:14px;
animation:float 6s linear infinite;
}
@keyframes float{
0%{transform:translateY(100vh);opacity:1;}
100%{transform:translateY(-10vh);opacity:0;}
}

canvas{
display:block;
margin:auto;
background:#1a1a2e;
border:3px solid rgba(255,255,255,0.2);
}
</style>
</head>
<body class="text-white">

<!-- ðŸŽµ MÃºsica -->
<audio autoplay loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8f3fef8c5.mp3?filename=fairy-tale-110354.mp3">
</audio>

<canvas id="game" width="900" height="500"></canvas>

<div class="absolute top-2 left-4 text-sm">
Nivel: <span id="level">1</span> ðŸ”¥ |
Cuentos: <span id="cuentos">0</span> ðŸ“–
</div>

<script>

/* ðŸŒŒ Estrellas */
for(let i=0;i<120;i++){
let s=document.createElement("div");
s.className="star";
s.style.left=Math.random()*100+"vw";
s.style.animationDuration=(Math.random()*5+5)+"s";
s.style.opacity=Math.random();
document.body.appendChild(s);
}

/* ðŸ’— Corazones flotando */
setInterval(()=>{
let h=document.createElement("div");
h.className="heart";
h.innerText="ðŸ’–";
h.style.left=Math.random()*100+"vw";
document.body.appendChild(h);
setTimeout(()=>h.remove(),6000);
},800);

/* ðŸŽ® Canvas */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

const MAP_WIDTH=2000;
const MAP_HEIGHT=1000;

let camera={x:0,y:0};

let player={
x:100,
y:100,
size:48,
speed:4
};

/* ðŸ‘‘ Sprite pÃºblico princesa */
const princessImg=new Image();
princessImg.src="https://i.imgur.com/6X12QZP.png"; // sprite pÃºblico ejemplo

/* ðŸ’¾ Guardado */
let level=parseInt(localStorage.getItem("level"))||1;
let cuentos=parseInt(localStorage.getItem("cuentos"))||0;

document.getElementById("level").innerText=level;
document.getElementById("cuentos").innerText=cuentos;

/* ðŸ“– Bloques */
let bloques=[
{x:400,y:300,type:"cuento"},
{x:900,y:600,type:"cuento"},
{x:1500,y:400,type:"mini"}
];

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

/* Fondo pixel */
ctx.fillStyle="#16213e";
ctx.fillRect(0,0,canvas.width,canvas.height);

/* Jugador */
ctx.drawImage(princessImg,
player.x-camera.x,
player.y-camera.y,
player.size,
player.size);

/* Bloques */
bloques.forEach(b=>{
ctx.fillStyle=b.type==="cuento"?"purple":"gold";
ctx.fillRect(
b.x-camera.x,
b.y-camera.y,
40,40);
});
}

/* Movimiento */
let keys={};
document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

function update(){
if(keys["ArrowLeft"])player.x-=player.speed;
if(keys["ArrowRight"])player.x+=player.speed;
if(keys["ArrowUp"])player.y-=player.speed;
if(keys["ArrowDown"])player.y+=player.speed;

/* CÃ¡mara scroll */
camera.x=player.x-canvas.width/2;
camera.y=player.y-canvas.height/2;

checkCollision();
draw();
requestAnimationFrame(update);
}

/* ðŸ“– Cuento */
function generarCuento(){
let frases=[
"Mi niÃ±a hermosa encontrÃ³ una estrella mÃ¡gica âœ¨",
"Mi princesa iluminÃ³ el reino con sus ojos ðŸ’–",
"Mi bebÃ© salvÃ³ el mundo con amor ðŸŒ¸"
];
return frases[Math.floor(Math.random()*frases.length)];
}

/* ðŸŽ® Mini juego */
function miniJuego(){
alert("Mini reto: Eres mi amorcita favorita ðŸ’•");
level++;
guardar();
}

/* Colisiones */
function checkCollision(){
bloques.forEach(b=>{
if(player.x < b.x+40 &&
player.x+player.size > b.x &&
player.y < b.y+40 &&
player.y+player.size > b.y){

if(b.type==="cuento"){
cuentos++;
alert(generarCuento());
guardar();
}
if(b.type==="mini") miniJuego();
}
});
}

function guardar(){
localStorage.setItem("level",level);
localStorage.setItem("cuentos",cuentos);
document.getElementById("level").innerText=level;
document.getElementById("cuentos").innerText=cuentos;
}

/* ðŸ”Š Voz */
function decirNombre(){
let msg=new SpeechSynthesisUtterance("Naomi...");
msg.pitch=1.2;
msg.rate=0.9;
speechSynthesis.speak(msg);
}
setTimeout(decirNombre,2000);

princessImg.onload=()=>{
update();
};

</script>

</body>
</html>
