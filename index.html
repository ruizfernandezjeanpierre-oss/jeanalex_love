<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>El Reino de Naomi ğŸ’–</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{
margin:0;
overflow:hidden;
background:black;
font-family:'Courier New', monospace;
}

/* Fondo estrellas */
.star{
position:absolute;
width:2px;
height:2px;
background:white;
animation:fall linear infinite;
}
@keyframes fall{
from{transform:translateY(-10px);}
to{transform:translateY(100vh);}
}

/* Canvas responsive */
canvas{
display:block;
margin:0 auto;
max-width:100vw;
max-height:100vh;
background:#111;
}

/* Corazones flotando */
.heart{
position:absolute;
color:pink;
font-size:20px;
animation:float 4s linear infinite;
}
@keyframes float{
0%{transform:translateY(0);opacity:1;}
100%{transform:translateY(-200px);opacity:0;}
}
</style>
</head>
<body>

<div id="startScreen" class="absolute inset-0 flex flex-col justify-center items-center bg-black text-white text-center">
<h1 class="text-3xl md:text-5xl mb-6 animate-pulse">ğŸŒ¸ El Reino de Naomi ğŸŒ¸</h1>
<button onclick="startGame()" class="bg-pink-500 px-6 py-3 rounded-xl text-xl hover:scale-110 transition">Entrar al cuento</button>
</div>

<canvas id="game"></canvas>

<div id="storyBox" class="hidden absolute bottom-0 w-full bg-black bg-opacity-80 text-pink-300 p-4 text-sm md:text-lg"></div>

<div id="credits" class="hidden absolute inset-0 flex flex-col justify-center items-center bg-black text-white text-center p-6">
<h2 class="text-3xl mb-4">Gracias por jugar mi princesa ğŸ’–</h2>
<p class="mb-4">Desde el dÃ­a que estamos juntos, mi niÃ±a, mi bebÃ©, mi amorcitaâ€¦</p>
<p class="mb-6">Este juego es pequeÃ±o comparado con lo que siento por ti.</p>
<h3 class="text-4xl text-pink-400 animate-pulse">Â¿Te casarÃ­as conmigo? ğŸ’</h3>
</div>

<script>
/* ESTRELLAS */
for(let i=0;i<80;i++){
let star=document.createElement("div");
star.className="star";
star.style.left=Math.random()*100+"vw";
star.style.animationDuration=(2+Math.random()*5)+"s";
document.body.appendChild(star);
}

/* VARIABLES */
let canvas=document.getElementById("game");
let ctx=canvas.getContext("2d");

function resize(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

let player={
x:100,
y:100,
size:32,
speed:4
};

let hearts=[];
let enemies=[];
let level=1;
let storiesCompleted=0;

/* GENERAR CORAZONES */
function spawnHearts(){
for(let i=0;i<5+level;i++){
hearts.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height
});
}
}

/* GENERAR ENEMIGOS */
function spawnEnemies(){
for(let i=0;i<level;i++){
enemies.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
speed:1+level*0.3
});
}
}

/* CONTROLES */
let keys={};
document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

/* MOVIMIENTO */
function move(){
if(keys["ArrowUp"])player.y-=player.speed;
if(keys["ArrowDown"])player.y+=player.speed;
if(keys["ArrowLeft"])player.x-=player.speed;
if(keys["ArrowRight"])player.x+=player.speed;
}

/* COLISION */
function collide(a,b){
return(
a.x<a.size+b.x &&
a.x+a.size>b.x &&
a.y<a.size+b.y &&
a.y+a.size>b.y
);
}

/* CUENTO AUTO GENERADO */
function generateStory(){
let frases=[
"En un reino mÃ¡gico, Naomi iluminaba todo con sus ojos hermosos.",
"Mi princesa Naomi transformaba la oscuridad en estrellas.",
"Mi niÃ±a valiente derrotaba sombras con amor.",
"Mi bebÃ© hermosa convertÃ­a el miedo en esperanza."
];
return frases[Math.floor(Math.random()*frases.length)]
+" Y juntos vivieron un San ValentÃ­n eterno lleno de amor ğŸ’–";
}

/* LOOP */
function update(){
move();

ctx.clearRect(0,0,canvas.width,canvas.height);

ctx.fillStyle="pink";
ctx.fillRect(player.x,player.y,player.size,player.size);

/* DIBUJAR CORAZONES */
ctx.fillStyle="red";
hearts.forEach((h,i)=>{
ctx.fillRect(h.x,h.y,20,20);
if(collide(player,{x:h.x,y:h.y,size:20})){
hearts.splice(i,1);
}
});

/* ENEMIGOS */
ctx.fillStyle="purple";
enemies.forEach(e=>{
e.x+=(player.x-e.x)*0.002*e.speed;
e.y+=(player.y-e.y)*0.002*e.speed;
ctx.fillRect(e.x,e.y,30,30);
});

/* NIVEL COMPLETADO */
if(hearts.length===0){
storiesCompleted++;
document.getElementById("storyBox").classList.remove("hidden");
document.getElementById("storyBox").innerText=generateStory();
setTimeout(()=>{
document.getElementById("storyBox").classList.add("hidden");
level++;
spawnHearts();
spawnEnemies();
},4000);

if(level===5){
document.getElementById("credits").classList.remove("hidden");
return;
}
}

requestAnimationFrame(update);
}

/* INICIO */
function startGame(){
document.getElementById("startScreen").classList.add("hidden");
spawnHearts();
spawnEnemies();
update();
}
</script>

</body>
</html>
