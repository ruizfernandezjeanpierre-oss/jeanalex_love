<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Mundo MÃ¡gico de Naomi âœ¨</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{margin:0;overflow:hidden;background:black;}
#gameCanvas{
background:transparent;
display:block;
margin:auto;
border:2px solid rgba(255,255,255,0.2);
}
.star{
position:absolute;
width:2px;
height:2px;
background:white;
animation:fall linear infinite;
}
@keyframes fall{
from{transform:translateY(-10px);}
to{transform:translateY(100vh);}
}
.hidden{display:none;}
</style>
</head>
<body class="text-white">

<audio id="music" autoplay loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8f3fef8c5.mp3?filename=fairy-tale-110354.mp3">
</audio>

<div class="absolute top-2 left-4 text-sm">
Nivel: <span id="level">1</span> ğŸ”¥ <br>
Cuentos: <span id="cuentoCount">0</span> ğŸ“– <br>
Juntos desde: <span id="contador"></span> â¤ï¸
</div>

<canvas id="gameCanvas" width="800" height="500"></canvas>

<div id="mensaje" class="absolute bottom-6 left-1/2 transform -translate-x-1/2 text-center max-w-lg"></div>

<button id="hiddenBtn" class="hidden absolute top-20 right-10 bg-pink-500 px-4 py-2 rounded-full">
ğŸ’– BotÃ³n Secreto
</button>

<!-- Controles tÃ¡ctiles -->
<div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-4 md:hidden">
<button onclick="move('left')" class="bg-white text-black px-4 py-2 rounded">â¬…</button>
<button onclick="move('right')" class="bg-white text-black px-4 py-2 rounded">â¡</button>
<button onclick="move('up')" class="bg-white text-black px-4 py-2 rounded">â¬†</button>
<button onclick="move('down')" class="bg-white text-black px-4 py-2 rounded">â¬‡</button>
</div>

<script>
/* ğŸŒŒ ESTRELLAS */
for(let i=0;i<100;i++){
let star=document.createElement("div");
star.className="star";
star.style.left=Math.random()*100+"vw";
star.style.animationDuration=(Math.random()*5+5)+"s";
star.style.opacity=Math.random();
document.body.appendChild(star);
}

/* â¤ï¸ CONTADOR */
const startDate=new Date("2024-01-01");
function updateCounter(){
let now=new Date();
let diff=Math.floor((now-startDate)/(1000*60*60*24));
document.getElementById("contador").innerText=diff+" dÃ­as";
}
updateCounter();

/* ğŸ® CANVAS */
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");

let player={x:50,y:50,size:20};
let cuentos=0;
let level=1;
let ultraFinalShown=false;

const bloques=[
{x:300,y:200,size:40,type:"cuento"},
{x:500,y:100,size:40,type:"mini"},
{x:600,y:300,size:40,type:"secreto"}
];

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

ctx.fillStyle="pink";
ctx.fillRect(player.x,player.y,player.size,player.size);

bloques.forEach(b=>{
ctx.fillStyle=b.type==="cuento"?"purple":b.type==="mini"?"gold":"red";
ctx.fillRect(b.x,b.y,b.size,b.size);
});
}

function move(dir){
if(dir==="left")player.x-=20;
if(dir==="right")player.x+=20;
if(dir==="up")player.y-=20;
if(dir==="down")player.y+=20;
checkCollision();
draw();
}

document.addEventListener("keydown",e=>{
if(e.key==="ArrowLeft")move("left");
if(e.key==="ArrowRight")move("right");
if(e.key==="ArrowUp")move("up");
if(e.key==="ArrowDown")move("down");
});

/* ğŸ“– CUENTOS */
function generarCuento(){
const frases=[
"Naomi encontrÃ³ una estrella que decÃ­a: mi princesa âœ¨",
"Un libro mÃ¡gico susurrÃ³: te amo mi niÃ±a ğŸ’–",
"El viento cantÃ³: mi bebÃ© hermosa ğŸŒ¸"
];
return frases[Math.floor(Math.random()*frases.length)];
}

/* ğŸ® MINI JUEGO */
function miniJuego(){
let numero=Math.floor(Math.random()*5);
let intento=prompt("Adivina un nÃºmero del 0 al 4 ğŸ’«");
if(parseInt(intento)===numero){
alert("Ganaste mi amorcita ğŸ’•");
level++;
}
}

/* ğŸ— CÃ“DIGO SECRETO */
function codigoSecreto(){
let pass=prompt("Ingresa el cÃ³digo secreto:");
if(pass==="miamor"){
if(!ultraFinalShown){
alert("ğŸ’ Final ultra especial: Naomi, eres el amor de mi vida.");
ultraFinalShown=true;
}else{
alert("Ya descubriste el final especial ğŸ’–");
}
}
}

/* COLISIONES */
function checkCollision(){
bloques.forEach(b=>{
if(player.x < b.x+b.size &&
player.x+player.size > b.x &&
player.y < b.y+b.size &&
player.y+player.size > b.y){

if(b.type==="cuento"){
cuentos++;
document.getElementById("cuentoCount").innerText=cuentos;
document.getElementById("mensaje").innerText=generarCuento();
if(cuentos>=5){
document.getElementById("hiddenBtn").classList.remove("hidden");
}
}
if(b.type==="mini") miniJuego();
if(b.type==="secreto") codigoSecreto();

}
});
document.getElementById("level").innerText=level;
}

/* ğŸ’– BOTÃ“N SECRETO */
document.getElementById("hiddenBtn").onclick=function(){
alert("Easter especial: Mi amorcita hermosa, siempre contigo ğŸ’•");
};
draw();
</script>

</body>
</html>
