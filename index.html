<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Reino de Naomi ğŸ‘‘âœ¨</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{
margin:0;
overflow:hidden;
background:black;
font-family:monospace;
}
canvas{
display:block;
margin:auto;
background:#0f172a;
image-rendering:pixelated;
}

/* Pantalla inicio */
#startScreen{
position:absolute;
inset:0;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
background:linear-gradient(to bottom,#1e3a8a,#000);
color:white;
animation:fadeIn 2s ease;
}
@keyframes fadeIn{
from{opacity:0;}
to{opacity:1;}
}
button{
background:#ec4899;
padding:12px 24px;
border-radius:30px;
}
</style>
</head>
<body>

<!-- ğŸµ MÃºsica -->
<audio id="music1" loop src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8f3fef8c5.mp3?filename=fairy-tale-110354.mp3"></audio>
<audio id="music2" loop src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_3e7a8d28a1.mp3?filename=epic-quest-124841.mp3"></audio>

<div id="startScreen">
<h1 class="text-4xl mb-6">ğŸ‘‘ El Reino de Naomi ğŸ‘‘</h1>
<p class="mb-4">Un cuento jugable para mi niÃ±a hermosa ğŸ’–</p>
<button onclick="startGame()">Comenzar aventura</button>
</div>

<canvas id="game"></canvas>

<script>

const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

function resize(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

/* ğŸ‘‘ Sprite sheet princesa */
const sprite=new Image();
sprite.src="https://i.imgur.com/QZ6XW9S.png"; // sprite sheet ejemplo 4 frames caminar

let frame=0;
let frameTimer=0;

/* ğŸ® Player */
let player={
x:100,
y:100,
size:64,
speed:4
};

let keys={};
document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

/* ğŸ‘¤ Enemigos sombra */
let enemies=[
{x:400,y:300},
{x:700,y:200}
];

/* ğŸ° Castillo final */
let castle={x:1200,y:400};

/* ğŸ† Logros */
let achievements=[];
let level=1;

/* ğŸ’¾ Guardado */
function save(){
localStorage.setItem("naomi_level",level);
localStorage.setItem("naomi_ach",JSON.stringify(achievements));
}
function load(){
level=parseInt(localStorage.getItem("naomi_level"))||1;
achievements=JSON.parse(localStorage.getItem("naomi_ach"))||[];
}
load();

/* ğŸ¬ Inicio */
function startGame(){
document.getElementById("startScreen").style.display="none";
document.getElementById("music1").play();
gameLoop();
}

/* ğŸ”„ Game Loop */
function gameLoop(){
update();
draw();
requestAnimationFrame(gameLoop);
}

function update(){

if(keys["ArrowLeft"])player.x-=player.speed;
if(keys["ArrowRight"])player.x+=player.speed;
if(keys["ArrowUp"])player.y-=player.speed;
if(keys["ArrowDown"])player.y+=player.speed;

/* AnimaciÃ³n caminar */
if(keys["ArrowLeft"]||keys["ArrowRight"]||keys["ArrowUp"]||keys["ArrowDown"]){
frameTimer++;
if(frameTimer>10){
frame=(frame+1)%4;
frameTimer=0;
}
}

/* ColisiÃ³n enemigos */
enemies.forEach(e=>{
if(Math.abs(player.x-e.x)<40 && Math.abs(player.y-e.y)<40){
alert("Una sombra intentÃ³ tocarteâ€¦ pero tu luz es mÃ¡s fuerte ğŸ’–");
if(!achievements.includes("luz")){
achievements.push("luz");
}
}
});

/* Castillo */
if(Math.abs(player.x-castle.x)<50 && Math.abs(player.y-castle.y)<50){
finalEspecial();
}

}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

/* Jugador */
ctx.drawImage(sprite,
frame*64,0,64,64,
player.x,player.y,player.size,player.size);

/* Enemigos */
ctx.fillStyle="black";
enemies.forEach(e=>{
ctx.fillRect(e.x,e.y,40,40);
});

/* Castillo */
ctx.fillStyle="purple";
ctx.fillRect(castle.x,castle.y,80,80);

}

/* ğŸ’ Final */
function finalEspecial(){
document.getElementById("music1").pause();
document.getElementById("music2").play();

setTimeout(()=>{
alert("Naomiâ€¦ ğŸ’–\n\nHas llegado al final del reino.\n\nMi princesaâ€¦\nÂ¿Te casarÃ­as conmigo? ğŸ’");
creditos();
},500);
}

function creditos(){
setTimeout(()=>{
alert("Gracias por ser mi niÃ±a,\nmi bebÃ©,\nmi amorcita.\n\nEres el mejor cuento que me pasÃ³ en la vida.");
},1000);
save();
}

</script>

</body>
</html>
